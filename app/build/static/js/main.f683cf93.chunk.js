(this.webpackJsonpwasm_algorithms=this.webpackJsonpwasm_algorithms||[]).push([[0],[,,function(e,n,t){e.exports={hide:"cam_hide__3ykpy",flex:"cam_flex__2nGjf",sideDiv:"cam_sideDiv__2z-E5",buttonList:"cam_buttonList__28TZE"}},,,function(e,n,t){var r=t(13),c=["box_blur","loadWasm"];e.exports=function(){var e=new Worker(t.p+"dee7a1e608e52e3fc65a.worker.js",{name:"[hash].worker.js"});return r(e,c),e}},,,,,,function(e,n,t){},function(e,n,t){},,function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),a=t.n(c),i=t(4),s=t.n(i),u=(t(11),t.p+"static/media/WebAssembly_Logo.1381587b.svg"),l=(t(12),t(2)),o=t.n(l),d=t(5),f=t.n(d);function j(e,n,r,c,a,i,s){if(null!==e.current&&null!==n.current&&null!==r.current&&null!==c.current&&null!==a.current&&null!==i.current&&null!==s.current){var u,l,o=-1,d=1/0,j=0,b=0,h=[],m=0,v=0,g=0;r.current.addEventListener("click",(function(){b=1===b?0:1})),c.current.addEventListener("click",(function(){b=2===b?0:2})),a.current.addEventListener("click",(function(){b=3===b?0:3})),i.current.addEventListener("click",(function(){b=4===b?0:4})),s.current.addEventListener("click",(function(){b=5===b?0:5})),t.e(3).then(t.t.bind(null,21,7)).then((function(e){l=e,navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(p).catch((function(){console.log("Something went wrong!")}))}))}function x(t){var r;if(n.current&&e.current){if(function(e){j%5===0&&(document.querySelector("#fps").innerHTML=(1e3/(e-d)).toFixed(2));(j+=1)>5&&(j=0);d=e}(t),v=n.current.videoWidth,g=n.current.videoHeight,v>0&&e.current&&-1===o)return function(t,r){if(n.current&&e.current){e.current.width=t,e.current.height=r;var c=t*r*4;return o=l.alloc(c),requestAnimationFrame(x)}}(v,g);if(null===(r=u)||void 0===r||r.drawImage(n.current,0,0,v,g),0===b||!(v>0&&e.current&&u))return requestAnimationFrame(x);var c,a,i=u.getImageData(0,0,v,g);switch(c=i.data.buffer,a=l.memory.buffer,new Uint8Array(a,o,c.byteLength).set(new Uint8Array(c)),b){case 2:for(var s=0;s<h.length;s++)h[s].box_blur(o,v,g,s,navigator.hardwareConcurrency)}}}function O(e){if(!e.data.type)if(e.data.loaded&&m===navigator.hardwareConcurrency-1)m=0,x((new Date).getTime());else if(e.data.loaded)m+=1;else if(e.data.workerFinished&&m===navigator.hardwareConcurrency-1){var n;console.log("workers are all finished"),m=0;var t=new Uint8ClampedArray(l.memory.buffer,o,v*g*4),r=new ImageData(t,v,g);null===(n=u)||void 0===n||n.putImageData(r,0,0),requestAnimationFrame(x)}else e.data.workerFinished&&(m+=1)}function p(t){null!==e.current&&(u=e.current.getContext("2d")),n.current&&(n.current.srcObject=t),function(){for(var e=0;e<navigator.hardwareConcurrency;e++){var n=f()();n.addEventListener("message",O),n.loadWasm(),h.push(n)}}()}}var b=function(){var e=Object(c.useRef)(null),n=Object(c.useRef)(null),t=Object(c.useRef)(null),a=Object(c.useRef)(null),i=Object(c.useRef)(null),s=Object(c.useRef)(null),u=Object(c.useRef)(null);return Object(c.useEffect)((function(){return j(e,n,t,a,i,s,u)}),[t,n,e]),Object(r.jsxs)("div",{className:o.a.flex,children:[Object(r.jsx)("div",{className:o.a.sideDiv,children:Object(r.jsxs)("ul",{className:o.a.buttonList,children:[Object(r.jsx)("li",{children:Object(r.jsx)("button",{ref:t,children:"Sobel Edge Detection"})}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{ref:a,children:"Box Blur"})}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{ref:i,children:"Sharpen"})}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{ref:s,children:"Emboss"})}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{ref:u,children:"Laplacian"})})]})}),Object(r.jsx)("canvas",{ref:e,children:" "}),Object(r.jsx)("video",{className:o.a.hide,autoPlay:!0,ref:n}),Object(r.jsx)("div",{className:o.a.sideDiv})]})};var h=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsxs)("header",{className:"App-header",children:[Object(r.jsx)("img",{src:u,className:"App-logo",alt:"logo"}),Object(r.jsxs)("p",{children:["Cam effects with ",Object(r.jsx)("code",{children:"wasm"})," and ",Object(r.jsx)("code",{children:"rust"})," ",Object(r.jsx)("span",{id:"fps"}),"fps"]}),Object(r.jsx)(b,{})]})})},m=function(e){e&&e instanceof Function&&t.e(4).then(t.bind(null,22)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),r(e),c(e),a(e),i(e)}))};s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(h,{})}),document.getElementById("root")),m()}],[[14,1,2]]]);
//# sourceMappingURL=main.f683cf93.chunk.js.map