(this.webpackJsonpwasm_algorithms=this.webpackJsonpwasm_algorithms||[]).push([[0],[,,function(e,n,t){e.exports={hide:"cam_hide__3ykpy",flex:"cam_flex__2nGjf",sideDiv:"cam_sideDiv__2z-E5",buttonList:"cam_buttonList__28TZE"}},,,function(e,n,t){var r=t(13),c=["box_blur","loadWasm","allocateImageMemory"];e.exports=function(){var e=new Worker(t.p+"17c88039e3680da16bfb.worker.js",{name:"[hash].worker.js"});return r(e,c),e}},,,,,,function(e,n,t){},function(e,n,t){},,function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),a=t.n(c),i=t(4),s=t.n(i),l=(t(11),t.p+"static/media/WebAssembly_Logo.1381587b.svg"),u=(t(12),t(2)),o=t.n(u),d=t(5),f=t.n(d);function j(e,n,t,r,c,a,i){if(null!==e.current&&null!==n.current&&null!==t.current&&null!==r.current&&null!==c.current&&null!==a.current&&null!==i.current){var s,l=1/0,u=0,o=0,d=[],j=0,b=0,h=0,m=new WebAssembly.Memory({initial:80,maximum:80,shared:!0});t.current.addEventListener("click",(function(){o=1===o?0:1})),r.current.addEventListener("click",(function(){o=2===o?0:2})),c.current.addEventListener("click",(function(){o=3===o?0:3})),a.current.addEventListener("click",(function(){o=4===o?0:4})),i.current.addEventListener("click",(function(){o=5===o?0:5})),navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){null!==e.current&&(s=e.current.getContext("2d")),n.current&&(n.current.srcObject=t),function(){for(var e=0;e<navigator.hardwareConcurrency;e++){var n=f()();n.addEventListener("message",g),n.loadWasm(m),d.push(n)}}()})).catch((function(){console.log("Something went wrong!")}))}function v(t){var r;if(n.current&&e.current){if(function(e){u%5===0&&(document.querySelector("#fps").innerHTML=(1e3/(e-l)).toFixed(2));(u+=1)>5&&(u=0);l=e}(t),b=n.current.videoWidth,h=n.current.videoHeight,e.current.width=b,e.current.height=h,null===(r=s)||void 0===r||r.drawImage(n.current,0,0,b,h),0===o||!(b>0&&e.current&&s))return requestAnimationFrame(v);var c,a,i=s.getImageData(0,0,b,h);switch(c=i.data.buffer,a=m.buffer,new Uint8Array(a,-1,c.byteLength).set(new Uint8Array(c)),o){case 2:for(var f=0;f<d.length;f++)d[f].box_blur(-1,b,h,f,navigator.hardwareConcurrency)}}}function g(e){if(!e.data.type)if(e.data.loaded&&j===navigator.hardwareConcurrency-1)j=0,v((new Date).getTime());else if(e.data.loaded)j+=1;else if(e.data.workerFinished&&j===navigator.hardwareConcurrency-1){var n;console.log("workers are all finished"),j=0;var t=new Uint8ClampedArray(m.buffer,-1,b*h*4),r=new ImageData(t,b,h);null===(n=s)||void 0===n||n.putImageData(r,0,0),requestAnimationFrame(v)}else e.data.workerFinished&&(j+=1)}}var b=function(){var e=Object(c.useRef)(null),n=Object(c.useRef)(null),t=Object(c.useRef)(null),a=Object(c.useRef)(null),i=Object(c.useRef)(null),s=Object(c.useRef)(null),l=Object(c.useRef)(null);return Object(c.useEffect)((function(){return j(e,n,t,a,i,s,l)}),[t,n,e]),Object(r.jsxs)("div",{className:o.a.flex,children:[Object(r.jsx)("div",{className:o.a.sideDiv,children:Object(r.jsxs)("ul",{className:o.a.buttonList,children:[Object(r.jsx)("li",{children:Object(r.jsx)("button",{ref:t,children:"Sobel Edge Detection"})}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{ref:a,children:"Box Blur"})}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{ref:i,children:"Sharpen"})}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{ref:s,children:"Emboss"})}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{ref:l,children:"Laplacian"})})]})}),Object(r.jsx)("canvas",{ref:e,children:" "}),Object(r.jsx)("video",{className:o.a.hide,autoPlay:!0,ref:n}),Object(r.jsx)("div",{className:o.a.sideDiv})]})};var h=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsxs)("header",{className:"App-header",children:[Object(r.jsx)("img",{src:l,className:"App-logo",alt:"logo"}),Object(r.jsxs)("p",{children:["Cam effects with ",Object(r.jsx)("code",{children:"wasm"})," and ",Object(r.jsx)("code",{children:"rust"})," ",Object(r.jsx)("span",{id:"fps"}),"fps"]}),Object(r.jsx)(b,{})]})})},m=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,15)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),r(e),c(e),a(e),i(e)}))};s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(h,{})}),document.getElementById("root")),m()}],[[14,1,2]]]);
//# sourceMappingURL=main.09b46374.chunk.js.map