(this.webpackJsonpwasm_algorithms=this.webpackJsonpwasm_algorithms||[]).push([[0],[,,function(e,t,n){e.exports={hide:"cam_hide__3ofNy",flex:"cam_flex__22L5-",sideDiv:"cam_sideDiv__1_1lG",buttonList:"cam_buttonList__TsgiK"}},,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),i=n.n(c),a=n(4),s=n.n(a),u=(n(10),n.p+"static/media/WebAssembly_Logo.1381587b.svg"),l=(n(11),n(2)),o=n.n(l);var d=function(){var e=Object(c.useRef)(null),t=Object(c.useRef)(null),i=Object(c.useRef)(null);return Object(c.useEffect)((function(){if(null!==e&&null!==t.current&&null!==i.current){var r=0;i.current.addEventListener("click",(function(){r=1===r?0:1}));var c,a,s=-1,u=1/0,l=0;n.e(3).then(n.bind(null,16)).then((function(n){a=n,navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(n){null!==e.current&&(c=e.current.getContext("2d")),t.current&&(t.current.srcObject=n),o((new Date).getTime())})).catch((function(e){console.log("Something went wrong!")}))}))}function o(n){if(t.current&&e.current){var i,d=t.current.videoWidth,f=t.current.videoHeight;if(e.current.width=d,e.current.height=f,null===(i=c)||void 0===i||i.drawImage(t.current,0,0,d,f),1===r&&e.current.width>0)if(e.current&&-1===s){e.current.width=d,e.current.height=f;var b=d*f*4;s=a.alloc(b)}else if(e.current&&c){var h=c.getImageData(0,0,d,f);v=h.data.buffer,x=a.memory.buffer,new Uint8Array(x,s,v.byteLength).set(new Uint8Array(v)),a.sobel(s,d,f);var j=new Uint8ClampedArray(a.memory.buffer,s,d*f*4),m=new ImageData(j,d,f);c.putImageData(m,0,0)}if(l%5===0){var g=(1e3/(n-u)).toFixed(2);document.querySelector("#fps").innerHTML=g}(l+=1)>5&&(l=0),u=n,requestAnimationFrame(o)}var v,x}}),[i,t,e]),Object(r.jsxs)("div",{className:o.a.flex,children:[Object(r.jsx)("div",{className:o.a.sideDiv,children:Object(r.jsx)("ul",{className:o.a.buttonList,children:Object(r.jsx)("button",{ref:i,children:"Sobel Edge Detection"})})}),Object(r.jsx)("canvas",{ref:e,children:" "}),Object(r.jsx)("video",{className:o.a.hide,autoPlay:!0,ref:t}),Object(r.jsx)("div",{className:o.a.sideDiv})]})};var f=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsxs)("header",{className:"App-header",children:[Object(r.jsx)("img",{src:u,className:"App-logo",alt:"logo"}),Object(r.jsxs)("p",{children:["Cam effects with ",Object(r.jsx)("code",{children:"wasm"})," and ",Object(r.jsx)("code",{children:"rust"})," ",Object(r.jsx)("span",{id:"fps"}),"fps"]}),Object(r.jsx)(d,{})]})})},b=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,17)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))};s.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(f,{})}),document.getElementById("root")),b()}],[[12,1,2]]]);
//# sourceMappingURL=main.c9a38faf.chunk.js.map